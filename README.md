# ACCOUNTING APP

>This is my final project for CS50's Introduction to Computer Science

>CS, python, flask, SQL, web development, CS50

#### Video Demo: 
#### Features:
>This is a flask web app with SQLite which allows shopkeepers and alikes to keep track of what they have sold and bought in real life. People who want to use this app have to create an account first. Their account credentials are stored in the SQLite database and they can change or restore their password. After a user logs in, they see a screen containing a table and a form to add products. They can add the products that they have bought, along with their details like what type of a product it is (e.g a cushion or a fridge) or when it was purchased. Added products show in the table in a chronological order of purchase dates. All the rows containing the information for the products have buttons which open up a new form to sell the product with ease. Users can check their transaction history, change their passwords and see their portfolios. In the portfolio page, the amount of the products they own is shown, along with a pie chart which shows what types of products they own. Also, they can check their profits and losses between two given dates via the form below. After the user provides dates, the app calculates their profits and losses and produces a line chart of it.

### Project Structure

- `app.py`: The main Python file containing the web application.
- `helpers.py`: Python file with helpful functions.
- `shop.db`: SQLite3 database storing information about products, categories, transactions, users, and password reset requests.
- `static/`: Directory containing static files, such as images.
- `templates/`: Directory containing HTML templates for the web app.

### Excluded Directories

The following directories are automatically generated and can be excluded from version control and project documentation:
- `__pycache__/`: Automatically generated by Python to store compiled bytecode.
- `.vscode/`: Configuration files for Visual Studio Code.
- `flask_session/`: Flask session data storage directory.


### Description:
This is a description of the files inside of my project.

1. app.py
    - Routes:

        - Welcome
            >This route is the route that is accessed first by the user. It serves the purpose of a landing page. 

        - Login
            >This route allows users to log in by putting in their credentials. The given credentials are compared with the ones in the database to see if they are valid. If they are, the user is redirected to their dashboard.

        - Forgot Password
            >Users can enter their usernames and emails to get a password recovery e-mail. This route creates a token to authenticate the users, a mail containing the password recovery link and it logs in to my gmail account with the environment variables containing my credentials and sends the password recovery mail.

        - Reset Password
            >This route cannot be accessed without a valid token, so if the user's token is expired then they cannot change their password with that link. If their token is valid, they can enter their new password to the form. After the form gets submitted, if their password and confirmation match and subject to the rules of password creation, their password is hashed and updated to that.

        - Change Password
            >This route can only be accessed if the user has logged in. They can put in their new password and confirmation to change their password.

        - Logout
            >Clears the session to log the user out.

        - Register
            >Those who want to use the app can provide a username, an email and a password to register. Passwords must be at least 8 characters long, have at least one uppercase and one lowercase letter and at least one number. Special characters aren't allowed in passwords. All of those are achieved by RegEx. Usernames must be unique, otherwise they are rejected. Passwords are always hashed before getting stored in the database.

        - Dashboard
            >If requested via `POST`, users can add the products they've bought with some information accompanying it. Those are name of the product, its price, its type and its purchase date. If the user already owns the product in question, a different category id is not generated for it because avoiding this helps to keep the database tidier. If requested via `GET`, users see the table containing all the products they have, in a chronological order according to their dates of purchase. The list `products` is a list of dictionaries which is then passed into `dashboard.html` to render the information in the table with Jinja3. All of the rows has a button that reads "sell" in Turkish, which opens up a form under that row to sell the product with ease. If you have 3 of product A and you sell 2, now the table would show that you have 1 of product A.

        - Sell
            >This is a route to sell products. The page `dashboard.html` has both a form under the table to sell products manually if some problem happens, and the buttons in the table open up mini forms via which you can sell the product without typing its name. Users cannot sell products that they do not own.

        - History
            >This route shows the users their history of transactions in a chronological order with all the other information related to their products. The products are listed in a table.

        - Portfolio
            >Here, users can see the amount of products that they own. A pie chart shows the categories of the products they own. They can input two dates to see their profits and/or losses between the two in a line chart.

2. helpers.py
    >This file contains some helpful functions which are imported to app.py.
    - Functions
        - login_required
            >This is the function from CS50's assignment which denies access to the routes that have `@login_required` if the user has not logged in yet.
        - tl
            >This function formats a value as Turkish Lira. It is used in html for display purposes.
        - validate_email
            >This function does RegEx to confirm if an email input has the correct format.
        - compare_date
            >This function takes two dates as inputs and compares them.
        - format_date
            >In the database, the dates are in ISO format and they appear in YYYY-MM-dd format. This function is used to format the dates selected from the database to the dd/mm/YYYY format with slashes instead of dashes.
        - sort
            >Sorts a list of dictionaries containing the products according to their dates of purchase.
        - confirm_pass
            >Checks if the password meets the aforementioned criteria.

3. shop.db
    >shop.db is a relational SQLite3 database. It contains information about products, product categories, sold products, transactions, users and password reset requests.
